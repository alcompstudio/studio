# Стандарты структурирования компонентов

## Разделение сложных компонентов

При разработке компонентов в проекте необходимо следовать принципу разделения ответственности и создавать модульную архитектуру. 

### Основные принципы

1. **Размер файлов**
   - Стремиться к тому, чтобы файлы содержали не более 300 строк кода
   - Если файл превышает это ограничение, рассмотреть возможность его разделения на логические части

2. **Логическое разделение**
   - Выделять отдельные функциональные части компонента в собственные подкомпоненты
   - Создавать подкомпоненты в отдельной директории `/components` рядом с основным компонентом
   - Основной файл должен только импортировать и объединять подкомпоненты

3. **Разделение типов и компонентов**
   - Выносить общие типы и интерфейсы в отдельный файл (например, `types.ts`)
   - Использовать эти типы во всех связанных компонентах

### Пример структуры

```
src/app/(app)/some-feature/
├── page.tsx                  # Основной компонент страницы
├── some-feature.tsx          # Компонент, связывающий подкомпоненты
└── components/               # Подкомпоненты
    ├── types.ts              # Общие типы и интерфейсы
    ├── feature-header.tsx    # Компонент заголовка
    ├── feature-form.tsx      # Компонент формы
    └── feature-summary.tsx   # Компонент итогов
```

### Преимущества подхода

1. **Повышение читаемости** — каждый файл сфокусирован на конкретной задаче
2. **Улучшение сопровождаемости** — изменения в одном компоненте не затрагивают другие
3. **Упрощение переиспользования** — компоненты можно использовать в других частях приложения
4. **Облегчение тестирования** — маленькие компоненты с одной ответственностью проще тестировать
5. **Ускорение разработки** — над разными компонентами могут работать разные разработчики
6. **Улучшение производительности** — компоненты могут быть по-разному оптимизированы

### Практический пример

В проекте был успешно применен этот подход для формы редактирования опций заказа:

```
src/app/(app)/orders/[orderId]/
├── stage-option-form.tsx     # Основной файл, экспортирующий компонент
└── components/               # Подкомпоненты
    ├── types.ts              # Общие типы
    ├── volume-fields.tsx     # Компонент полей объема
    ├── price-fields.tsx      # Компонент цен
    ├── price-calculation.tsx # Компонент расчетов
    └── stage-option-form.tsx # Основная логика компонента
```

Такое разделение позволило сократить размер основного файла с более чем 600 строк до менее 100, при этом сохранив всю функциональность и упростив дальнейшую разработку.

## Рекомендации по применению

- Применять разделение при превышении файлом 300 строк кода
- Выделять в отдельные компоненты логически обособленные части
- Не разделять компоненты, если это усложняет понимание их взаимодействия
- Создавать отдельные типы для компонентов, чтобы обеспечить строгую типизацию
- Поддерживать согласованные имена файлов и директорий
