<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Развертывание — Шаг 2: Первоначальная настройка | User Wiki</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <aside class="sidebar">
    <div class="logo">User Wiki</div>
    <nav>
      <ul>
        <li>
          <button class="accordion-btn" aria-expanded="false" aria-controls="deploy-list">Развертывание</button>
          <ul class="submenu" id="deploy-list" hidden>
            <li><a href="deploy.html">Оглавление</a></li>
            <li><a href="deploy-1.html">1. Подготовка и создание сервера</a></li>
            <li><a href="deploy-2.html" class="active">2. Первоначальная настройка</a></li>
            <li><a href="deploy-3.html">3. Установка ПО</a></li>
            <li><a href="deploy-4.html">4. Загрузка и настройка приложения</a></li>
            <li><a href="deploy-5.html">5. Запуск и Firewall</a></li>
            <li><a href="deploy-6.html">6. Проблемы и решения</a></li>
          </ul>
        </li>
        <li>
          <button class="accordion-btn" aria-expanded="false" aria-controls="update-list">Обновление</button>
          <ul class="submenu" id="update-list" hidden>
            <li><a href="update.html">Оглавление</a></li>
            <!-- Здесь можно добавить подробные страницы по шагам обновления -->
          </ul>
        </li>
      </ul>
    </nav>
  </aside>
  <main class="content">
    <h1>Шаг 2: Первоначальная настройка сервера</h1>
    <ol>
      <li>
        <b>Подключение к серверу по SSH</b><br>
        <span class="muted">Инструкция:</span> <code>ssh root@157.180.87.32</code><br>
        <span class="muted">Статус:</span> Выполнен.<br>
        <span class="muted">Проблема:</span> <b>WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!</b><br>
        <span class="muted">Решение:</span> Удалить старую запись ключа: <code>ssh-keygen -R 157.180.87.32</code>
      </li>
      <li>
        <b>Обновление системы</b><br>
        <span class="muted">Инструкция:</span> <code>apt update && apt upgrade -y</code><br>
        <span class="muted">Статус:</span> Выполнен.<br>
        <span class="muted">Комментарий:</span> Сервер перезагружен (<code>reboot</code>), повторное подключение успешно.
      </li>
      <li>
        <b>Создание нового пользователя с sudo-правами</b><br>
        <span class="muted">Инструкция:</span> Создать пользователя <code>deployuser</code>, добавить в группу <code>sudo</code>, скопировать SSH-ключ.<br>
        <span class="muted">Статус:</span> Выполнен.<br>
        <span class="muted">Комментарий:</span> Успешное подключение под <code>deployuser@157.180.87.32</code>
      </li>
    </ol>
    <h2>Возможные проблемы и решения</h2>
    <ul>
      <li>
        <b>Ошибка SSH-ключа:</b> <br>
        <span class="muted">Описание:</span> При первой попытке подключения возникает предупреждение о смене идентификатора.<br>
        <span class="muted">Решение:</span> Выполнить <code>ssh-keygen -R IP_СЕРВЕРА</code> для удаления старого ключа.
      </li>
      <li>
        <b>Проблемы с sudo:</b> <br>
        <span class="muted">Описание:</span> Если новый пользователь не имеет прав sudo, проверьте добавление в группу <code>sudo</code>.<br>
        <span class="muted">Решение:</span> <code>usermod -aG sudo deployuser</code>
      </li>
    </ul>
  </main>
  <script src="../script.js"></script>
</body>
</html>
