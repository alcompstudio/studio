<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Развертывание — Шаг 4: Загрузка и настройка приложения | User Wiki</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <aside class="sidebar">
    <div class="logo">User Wiki</div>
    <nav>
      <ul>
        <li>
          <button class="accordion-btn" aria-expanded="false" aria-controls="deploy-list">Развертывание</button>
          <ul class="submenu" id="deploy-list" hidden>
            <li><a href="deploy.html">Оглавление</a></li>
            <li><a href="deploy-1.html">1. Подготовка и создание сервера</a></li>
            <li><a href="deploy-2.html">2. Первоначальная настройка</a></li>
            <li><a href="deploy-3.html">3. Установка ПО</a></li>
            <li><a href="deploy-4.html" class="active">4. Загрузка и настройка приложения</a></li>
            <li><a href="deploy-5.html">5. Запуск и Firewall</a></li>
            <li><a href="deploy-6.html">6. Проблемы и решения</a></li>
          </ul>
        </li>
        <li>
          <button class="accordion-btn" aria-expanded="false" aria-controls="update-list">Обновление</button>
          <ul class="submenu" id="update-list" hidden>
            <li><a href="update.html">Оглавление</a></li>
            <!-- Здесь можно добавить подробные страницы по шагам обновления -->
          </ul>
        </li>
      </ul>
    </nav>
  </aside>
  <main class="content">
    <h1>Шаг 4: Загрузка и настройка приложения</h1>
    <ol>
      <li>
        <b>Сборка проекта локально</b><br>
        <span class="muted">Инструкция:</span> <code>npm run build</code> на локальной машине.<br>
        <span class="muted">Статус:</span> Выполнен (с предупреждениями по Order).<br>
        <span class="muted">Комментарий:</span> Предупреждение об импорте Order (функционал заказов не готов).
      </li>
      <li>
        <b>Архивирование проекта</b><br>
        <span class="muted">Инструкция:</span> Заархивируйте проект в <code>studio_app.tar.gz</code>.<br>
        <span class="muted">Статус:</span> Выполнен.
      </li>
      <li>
        <b>Копирование архива на сервер</b><br>
        <span class="muted">Инструкция:</span> Скопируйте архив на сервер.<br>
        <span class="muted">Статус:</span> Выполнен.
      </li>
      <li>
        <b>Распаковка на сервере</b><br>
        <span class="muted">Инструкция:</span> Распакуйте файлы в <code>/var/www/studio_app</code>.<br>
        <span class="muted">Статус:</span> Выполнен.
      </li>
      <li>
        <b>Установка зависимостей</b><br>
        <span class="muted">Инструкция:</span> <code>npm install</code> на сервере.<br>
        <span class="muted">Статус:</span> Выполнен.<br>
        <span class="muted">Комментарий:</span> Установка прошла успешно.
      </li>
      <li>
        <b>Создание и настройка .env</b><br>
        <span class="muted">Инструкция:</span> Создайте файл <code>.env</code> и заполните переменные (DB_NAME, DB_USERNAME, DB_PASSWORD, DB_HOST).<br>
        <span class="muted">Статус:</span> Выполнен.
      </li>
      <li>
        <b>Запуск миграций базы данных</b><br>
        <span class="muted">Инструкция:</span> <code>npx tsx src/lib/migrate.ts</code> в директории приложения.<br>
        <span class="muted">Статус:</span> Выполнен.<br>
        <span class="muted">Комментарий:</span> Миграции успешно выполнены.<br>
        <span class="muted">Возможная проблема:</span> Запуск <code>node .next/server/chunks/56.js</code> не дал вывода.<br>
        <span class="muted">Решение:</span> Использовать <code>npx tsx src/lib/migrate.ts</code>
      </li>
    </ol>
    <h2>Возможные проблемы и решения</h2>
    <ul>
      <li>
        <b>Ошибка миграции:</b> <br>
        <span class="muted">Описание:</span> Если миграция уже была применена вручную, удалите или переименуйте файл миграции.<br>
        <span class="muted">Решение:</span> Избегайте ошибок "column already exists".
      </li>
      <li>
        <b>Проблемы с зависимостями:</b> <br>
        <span class="muted">Решение:</span> Проверьте актуальность <code>package.json</code> и <code>package-lock.json</code>.
      </li>
      <li>
        <b>Проблемы с .env:</b> <br>
        <span class="muted">Решение:</span> Проверьте переменные окружения, не включайте .env в архив.
      </li>
    </ul>
  </main>
  <script src="../script.js"></script>
</body>
</html>
