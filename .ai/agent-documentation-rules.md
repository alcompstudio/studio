# Правила работы ИИ-агента с документацией проекта

## Основные принципы доступа к документации

1. **При инициализации сессии:**
   - При первом запуске и начале новой сессии самостоятельно изучи основные документы проекта (README.md, architecture.md).
   - Проверь наличие файла .ai/pending-documentation-updates.md и предложи обновления при его обнаружении.

2. **При обработке запросов пользователя:**
   - Если запрос касается структуры проекта, компонентов, архитектуры или принципов работы - обратись к соответствующей документации.
   - При выявлении ключевых слов: "компонент", "архитектура", "документация", "как работает", "структура", "не помню" - загрузи и изучи релевантные документы.

3. **При неуверенности:**
   - Если не обладаешь достаточной информацией для качественного ответа - явно укажи это и обратись к документации.
   - Если возникают сомнения в архитектурных решениях или структуре - проверь docs/architecture.md и docs/decisions/.

4. **Балансирование нагрузки на контекст:**
   - Не загружай одни и те же документы повторно в рамках одной сессии, если контекст не изменился значительно.
   - Загружай только документы, непосредственно связанные с текущим запросом.
   - Приоритизируй более специфичные документы перед общими.

5. **Навигация по документации:**
   - При работе с новым компонентом - ищи его документацию в docs/components/.
   - При вопросах по API - обращайся к docs/api/ (если существует).
   - При архитектурных вопросах - изучи docs/decisions/ и docs/architecture.md.

6. **Поддержание актуальности документации:**
   - После внесения значимых изменений в код - предложи обновить соответствующую документацию.
   - Регулярно проверяй наличие .ai/pending-documentation-updates.md.
   - При создании новых компонентов или API - создавай соответствующую документацию.

## Контрольные точки для обращения к документации

1. **Новая сессия или проект:**
   - Загрузи docs/README.md и docs/architecture.md для общего понимания.

2. **Работа с компонентом:**
   - Загрузи документацию по конкретному компоненту из docs/components/.
   - Изучи соответствующие .metadata.json файлы (если есть).

3. **Архитектурные вопросы:**
   - Обратись к docs/architecture.md и релевантным ADR в docs/decisions/.

4. **Разработка новой функциональности:**
   - Изучи похожие компоненты и их документацию для соблюдения единого стиля.
   - Проверь docs/blueprint.md для соответствия общему видению проекта.

5. **Отчеты о прогрессе:**
   - При завершении значимых задач проверь и обнови docs/progress/.
   - При получении указания "обнови документацию проекта" или подобных, запусти скрипты автоматического обновления документации из директории scripts/docs:  
     * `node scripts/docs/documentation-updater.js` - основной скрипт, обновляющий всю документацию
     * `node scripts/docs/git-progress-generator.js` - генерирует отчет о прогрессе на основе истории Git
     * `node scripts/docs/code-structure-extractor.js` - обновляет документацию по структуре кода
     * `node scripts/docs/docs-validator.js` - проверяет корректность документации

## Специфические правила для текущего проекта

1. **Учет React компонентов:**
   - Помни о разделении между Серверными Компонентами (SC) и Клиентскими Компонентами (CC) в Next.js App Router.
   - Серверные компоненты могут быть `async` для выборки данных, но не могут использовать хуки React.
   - Клиентские компоненты начинаются с директивы `"use client;"` и могут использовать хуки.

2. **Управление типами:**
   - Общие типы должны определяться в выделенных файлах (например, src/types/index.ts).
   - При создании новых интерфейсов следуй существующим паттернам типизации.

3. **Соблюдение архитектурных принципов:**
   - Следуй компонентному подходу и принципу разделения ответственности.
   - Поддерживай чёткое разделение между UI логикой, бизнес-логикой и доступом к данным.

4. **Фиксация и отправка изменений:**
   - При получении указания "отправить обновления на Гитхаб" или подобных, предоставь следующие шаги:
     * Добавить все изменения в индекс: `git add .`
     * Создать коммит с информативным сообщением: `git commit -m "Описание изменений"`
     * Отправить изменения на удаленный репозиторий: `git push origin master`
